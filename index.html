<link rel="stylesheet" href="style.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
<link rel="icon" href="chat-bot.png">
    <nav class="navbar">
        <h1 class="h12">AI DEBUGGER</h1>
        <h1 class="h1">Code Debug ChatBot</h1>
    </nav>
    <div class="chatarea"></div>
        <!--<div class="Header">
            <h1>Code Debug ChatBot</h1>
            <i class="fa-sharp fa-solid fa-message-bot"></i>
            <i class="fa-solid fa-message-bot"></i>
        </div>-->
        <div class="chatarea1">
            <!--<div class="botmsg">

                <h3 class="botmsg1">Ask Me Anything..</h2>
            </div>-->
            <div class="usermsg">
                <h3 class="botmsg1"></h2>
                <!--<h3 class="usermsg1">hi</h3>-->
            </div>
            <div style="align-items: center; display: flex; flex-wrap: wrap; justify-content: space-between;">
                <textarea name="" id="inputarea"></textarea>
                <button class="btn" onclick="appendumsg()">Send</button>
            </div>
        
    </div>
        </div>
        <script>
            var btn=document.querySelector(".btn")
            var botmsg=document.querySelector(".botmsg")
            var usermsg=document.querySelector(".usermsg")
            
            function appendumsg() {
                var message=document.querySelector("#inputarea")
                message=message.value
                if(message){
                    var messageelement=document.createElement("h3")
                    messageelement.classList.add("usermsg1")
                    messageelement.textContent=message
                    usermsg.appendChild(messageelement)
                    setTimeout(() => {
                    const botresponse=getmsg(message)
                    appendbmsg(botresponse)
        
                }, 1000);
                }
            function appendbmsg(msg){
                var msg1=document.createElement("h3")
                /*msg1.classList.add("botmsg1")
                msg1.textContent=msg*/
                usermsg.appendChild(msg1)
            }
                
            }
            function getmsg() {
                const usermsg = document.querySelector("#usermsg");
            const msg1 = document.createElement("h3");
            msg1.classList.add("botmsg1");

            if (data.detected_vulnerability) {
                msg1.textContent = `Detected Vulnerability: ${data.detected_vulnerability}`;
            }

            if (data.suggested_fix) {
                msg1.textContent += `\nSuggested Fix: ${data.suggested_fix}`;
            }

            return msg1
            }
            function sendmessage(message){
                if (message){
                    const flaskURL = 'http://localhost:5000/check_vulnerability';  // Replace with your Flask endpoint
        
            // Create the data to send
            const data = {
                message: message
            };
        
            // Send a POST request using Fetch API
            fetch(flaskURL, {
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())  // Parse JSON response
            .then(data => {
                console.log('Success:', data);  // Handle success
            })
            .catch((error) => {
                console.error('Error:', error);  // Handle errors
            });
                }
            }
            
            function getmsg() {
                return "Idk"
            }
        </script>
<style>
    *{
        font-family: "Poppins", sans-serif;
      font-weight: 500;
      font-style: normal;
      
      z-index: 0;
    }
    .chatarea{
        top: 60px;
        left: 0;
        margin: 8px;
        background-color:rgb(109, 108, 108) ;
        position: absolute;
        bottom: 0;
        right: 0;
        border-radius: 10px;
        z-index: 1;
        border: 2px;
        
    }
    .navbar{
        z-index: 2;
        top: 0;
        left: 0;
        margin: 0;
        position: fixed;
        width: 100%;
        height: 30px;
        padding: 10px;
        
        box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        background-color: rgb(255, 255, 255);
    }
    .h12{
        font-weight: 550;
        top: -10px;
        position: absolute;
    }
    .h1{
        left: 40%;
        top: -10px;
        position: absolute;
        text-align: center;
        font-weight: 550;
        color: rgb(157, 84, 157);
    }
    .Header{
        font-family: "Poppins", sans-serif;
      font-weight: 500;
      font-style: normal;
    z-index: -1;
    }
    .Header h1{
        text-align: center;
    }
    .chatarea1{
        margin-top: 40px;
        background-color: rgb(109, 108, 108);
        border: 2px;
        z-index: 2;
        top: 40px;
        bottom: 60px;
        left: 30px;
        right: 30px;
        position: absolute;
        border-radius: 5px;
        border: none;
        border-radius: 10px;
        color: #eee5e5;
    }
    .botmsg1{
        width: fit-content;
        background-color: rgb(100, 98, 98);
        border-radius: 10px;
        margin: 10px;
        padding: 5px;
        text-align: left;
    }
    .usermsg1{
        
        display: inline-block; /* Makes the element fit its content */
          text-align: left; /* Ensures the text inside the block is left-aligned */
          padding: 5px;
          background-color: rgb(100, 98, 98);
          border-radius: 5px;
          margin: 10px;
    }
    .usermsg{
        width: 100%;
          text-align: right;
        height: 400px;
        overflow-y: scroll;
    }
    #inputarea{
        margin-top: 400px;
        background-color: rgb(216, 213, 213);
        z-index: 1;
        top: 40px;
        bottom: 60px;
        left: 4px;
        right: 150px;
        position: absolute;
        border: none;
        border-radius: 10px;
        display: flex;
        flex-wrap: wrap;
        overflow-y: scroll;
    }
    
    .btn {
        top: 460px;
        z-index: 1;
        right:0px;
        border-radius: 10px;
        
        padding-top: 10px;
        padding-bottom: 10px;
        padding-left: 15px;
        padding-right: 15px;
        background-color: rgb(83, 81, 81);
        position: absolute;
        border: 0;
        cursor: pointer;
      appearance: button;
      background-color: #000;
      background-image: none;
      border: 1px solid #000;
      border-radius: 4px;
      box-shadow: #fff 4px 4px 0 0,#000 4px 4px 0 1px;
      box-sizing: border-box;
      color: #fff;
      cursor: pointer;
      
      font-family: ITCAvantGardeStd-Bk,Arial,sans-serif;
      font-size: 14px;
      font-weight: 400;
      line-height: 20px;
      
      overflow: visible;
      padding: 12px 40px;
      text-align: center;
      text-transform: none;
      touch-action: manipulation;
      user-select: none;
      -webkit-user-select: none;
      vertical-align: middle;
      white-space: nowrap;
    }
    
    .button-50:focus {
      text-decoration: none;
    }
    
    .button-50:hover {
      text-decoration: none;
    }
    
    .button-50:active {
      box-shadow: rgba(0, 0, 0, .125) 0 3px 5px inset;
      outline: 0;
    }
    
    .button-50:not([disabled]):active {
      box-shadow: #fff 2px 2px 0 0, #000 2px 2px 0 1px;
      transform: translate(2px, 2px);
    }
    
    
    @media (min-width: 768px ) {
        .btn {
          padding: 12px 50px;
        }
        #inputarea{
            
            position: absolute;
        }
      }
    @media (max-width:768px){
        #inputarea{
            width: 70%;
            
        }
        .btn {
            left:73%
          }
    }
    
</style>